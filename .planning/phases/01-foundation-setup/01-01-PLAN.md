---
phase: 01-foundation-setup
plan: 01
type: execute
---

<objective>
Establish Python development environment with OpenCV and MediaPipe dependencies, and verify basic webcam capture functionality works correctly on the development machine.

Purpose: Create the foundational infrastructure that all subsequent phases depend on — without a working Python environment and verified webcam access, no face detection or mouth detection work can proceed.

Output: Working Python virtual environment, requirements.txt with locked dependencies, and a basic webcam capture script that displays live video with keyboard quit functionality.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Project Requirements:**
- Python with opencv-python (cv2) and mediapipe
- Real-time webcam feed processing
- Keyboard control ('q' to quit)

**Constraints:**
- Must eventually run on Raspberry Pi (ARM compatibility consideration for dependency versions)
- Core value is detection accuracy — foundation must be solid

**Current State:**
- Empty project (only .planning/ and README.md exist)
- No Python files or environment yet
- First phase of 4-phase roadmap
</context>

<tasks>

<task type="auto">
  <name>Task 1: Setup Python virtual environment and install dependencies</name>
  <files>requirements.txt, .gitignore</files>
  <action>
    1. Create requirements.txt with:
       - opencv-python (use opencv-python, not opencv-contrib-python — avoid unnecessary modules)
       - mediapipe (specify recent stable version like >=0.10.0 for Face Mesh support)

    2. Create .gitignore if it doesn't exist, add:
       - venv/
       - __pycache__/
       - *.pyc
       - .DS_Store

    3. Create Python virtual environment:
       python3 -m venv venv

    4. Activate and install dependencies:
       source venv/bin/activate && pip install --upgrade pip && pip install -r requirements.txt

    5. Verify installations:
       python -c "import cv2; print(f'OpenCV: {cv2.__version__}')"
       python -c "import mediapipe; print(f'MediaPipe: {mediapipe.__version__}')"
  </action>
  <verify>Both import commands succeed and print version numbers without errors</verify>
  <done>
    - requirements.txt exists with opencv-python and mediapipe
    - .gitignore exists with venv/ excluded
    - venv/ directory created
    - Both libraries import successfully with version confirmation
  </done>
</task>

<task type="auto">
  <name>Task 2: Create basic webcam capture script</name>
  <files>main.py</files>
  <action>
    Create main.py with basic OpenCV webcam capture:

    1. Import cv2
    2. Initialize video capture: cv2.VideoCapture(0) — default webcam
    3. Check if camera opened successfully (cap.isOpened())
    4. Main loop:
       - Read frame: ret, frame = cap.read()
       - Display frame: cv2.imshow('Mouth Detection', frame)
       - Wait for 'q' key: if cv2.waitKey(1) & 0xFF == ord('q'): break
    5. Cleanup: cap.release(), cv2.destroyAllWindows()

    Include:
    - Clear comments explaining each section
    - Error handling if camera fails to open
    - Proper resource cleanup

    DO NOT add MediaPipe yet — this task verifies basic OpenCV webcam functionality only. MediaPipe integration comes in Phase 2.
  </action>
  <verify>python main.py runs without syntax errors (python -m py_compile main.py succeeds)</verify>
  <done>
    - main.py exists with complete webcam capture logic
    - Script compiles without syntax errors
    - Includes comments and error handling
    - Has proper cleanup (release, destroyAllWindows)
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Basic webcam capture script that displays live video feed and responds to 'q' key</what-built>
  <how-to-verify>
    1. Activate virtual environment: source venv/bin/activate
    2. Run script: python main.py
    3. Confirm:
       - Window opens titled "Mouth Detection"
       - Live video feed displays from webcam (you should see yourself)
       - Video is smooth, not laggy or frozen
       - Pressing 'q' key closes window and exits cleanly
       - No error messages in terminal
    4. Test edge case: Run again and press 'q' immediately to verify clean shutdown
  </how-to-verify>
  <resume-signal>Type "approved" if webcam displays correctly, or describe issues (e.g., "no video", "window doesn't close", etc.)</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] venv/ directory exists and is in .gitignore
- [ ] requirements.txt contains opencv-python and mediapipe
- [ ] `python -c "import cv2, mediapipe"` succeeds in activated venv
- [ ] main.py exists with complete webcam logic
- [ ] Webcam displays live video when main.py runs
- [ ] Pressing 'q' exits cleanly
</verification>

<success_criteria>

- Python virtual environment created and activated
- Dependencies installed and importable
- Basic webcam capture script runs successfully
- Live video displays in window
- Keyboard quit functionality works
- No errors or warnings during execution
- Ready for Phase 2 MediaPipe integration
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-setup/01-01-SUMMARY.md`:

# Phase 1 Plan 1: Foundation Setup Summary

**Python environment and basic webcam capture established**

## Accomplishments

- Created Python virtual environment with opencv-python and mediapipe
- Verified library installations and version compatibility
- Implemented basic webcam capture script with display and quit functionality
- Confirmed webcam hardware access and video display working correctly

## Files Created/Modified

- `requirements.txt` - OpenCV and MediaPipe dependencies
- `.gitignore` - Python environment exclusions
- `main.py` - Basic webcam capture script
- `venv/` - Virtual environment (excluded from git)

## Decisions Made

[Document any version-specific choices or configuration decisions made during setup, or "None"]

## Issues Encountered

[Document any installation issues, camera access problems, or platform-specific quirks discovered, or "None"]

## Next Phase Readiness

Phase 2 can proceed — Python environment is stable and webcam access is confirmed working.
</output>
