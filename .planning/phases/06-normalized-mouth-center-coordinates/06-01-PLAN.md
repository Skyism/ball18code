---
phase: 06-normalized-mouth-center-coordinates
plan: 01
type: execute
---

<objective>
Calculate mouth center position (mouthX, mouthY) relative to screen center with normalized range [-1, 1].

Purpose: Provide normalized coordinate system for mouth position tracking, enabling intuitive directional control where (0,0) is screen center and [-1, 1] represents screen edges.
Output: Real-time mouthX and mouthY values displayed on screen with normalized coordinates.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-mouth-detection-logic/03-01-SUMMARY.md
@main.py

**Tech stack available:** opencv-python, mediapipe>=0.10.0, numpy
**Established patterns:**
- Threshold-based detection with configurable constants
- Multi-metric display at consistent Y-offsets (30, 60, 90, 120, 150)
- Color-coding for visual feedback (green=normal, red=alert)
- Real-time display of detection metrics

**Constraining decisions:**
- Phase 3: Use absolute pixel distance for reliable detection
- Phase 5: Multi-metric stacked display pattern at Y-offsets
</context>

<tasks>

<task type="auto">
  <name>Task 1: Calculate mouth center coordinates</name>
  <files>main.py</files>
  <action>
Calculate mouth center position by averaging landmarks 13 and 14:
- mouthX_px = (x_13 + x_14) / 2
- mouthY_px = (y_13 + y_14) / 2

Store these as intermediate pixel coordinates before normalization.
  </action>
  <verify>Print mouthX_px and mouthY_px values in terminal to confirm they are averaging correctly between landmarks 13 and 14 pixel positions</verify>
  <done>Mouth center calculated as midpoint of landmarks 13 and 14 in pixel space</done>
</task>

<task type="auto">
  <name>Task 2: Normalize coordinates relative to screen center</name>
  <files>main.py</files>
  <action>
Transform mouth center from pixel space to normalized [-1, 1] range:
- Screen center: (frame_width/2, frame_height/2)
- mouthX = (mouthX_px - frame_width/2) / (frame_width/2)
- mouthY = (mouthY_px - frame_height/2) / (frame_height/2)

This maps:
- Screen center (0,0)
- Left edge = -1, right edge = +1
- Top edge = -1, bottom edge = +1

Note: Y-axis may need sign flip depending on desired convention (OpenCV uses top-left origin, so negative Y = up by default).
  </action>
  <verify>Move face left/right/up/down and confirm mouthX and mouthY values change appropriately, ranging from approximately -1 to +1</verify>
  <done>mouthX and mouthY normalized to [-1, 1] range with screen center at (0, 0)</done>
</task>

<task type="auto">
  <name>Task 3: Display normalized mouth coordinates</name>
  <files>main.py</files>
  <action>
Add display for mouthX and mouthY values following established multi-metric pattern:
- Display at Y-offset 150: "Mouth: X={mouthX:.2f} Y={mouthY:.2f}"
- Use white color (255, 255, 255) for neutral information display
- Format to 2 decimal places for readability
- Position at (10, 150) to follow established stacked layout

Maintain all existing displays (distance, state, face width, camera distance indicator).
  </action>
  <verify>Run main.py and confirm mouthX/mouthY display appears at bottom of metric stack, values update in real-time, and range stays within [-1, 1]</verify>
  <done>Normalized mouth coordinates displayed in real-time with 2 decimal precision</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] Run `python main.py` without errors
- [ ] Mouth center calculates as average of landmarks 13 and 14
- [ ] Moving face left shows mouthX approaching -1, right shows +1
- [ ] Moving face up/down shows mouthY changing appropriately
- [ ] Values stay within [-1, 1] range when face is visible in frame
- [ ] Display shows "Mouth: X=0.XX Y=0.XX" format
- [ ] All existing functionality preserved (mouth detection, distance, etc.)
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- mouthX and mouthY calculated from landmarks 13 and 14 center point
- Coordinates normalized to [-1, 1] range with screen center at (0, 0)
- Real-time display of normalized mouth position
</success_criteria>

<output>
After completion, create `.planning/phases/06-normalized-mouth-center-coordinates/06-01-SUMMARY.md`:

# Phase 6 Plan 1: Normalized Mouth Center Coordinates Summary

**[One-line description of what was shipped]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `main.py` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

Phase 6 complete, ready for next work.
</output>
